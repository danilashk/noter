# PROJECT PLAN: Live Brainstorm MVP

## Описание проекта
Минималистичная realtime доска для мозгового штурма с AI-ассистентом. Фокус на мгновенной синхронизации, простоте использования и вау-эффекте от коллаборации.

## Технологический стек
- **Frontend**: Next.js 15 (App Router), TypeScript, Tailwind CSS
- **UI**: Shadcn/ui, Framer Motion
- **Backend**: Supabase (PostgreSQL, Realtime, Auth, Edge Functions)
- **AI**: Perplexity MCP
- **Deployment**: Vercel

## Этапы разработки

### ЭТАП 1: Инициализация и базовая структура (30 минут)

#### Задача 1.1: Создание Next.js проекта
**Ответственный**: Next.js Архитектор
**Описание**: Инициализация проекта с TypeScript, настройка структуры папок
**Критерии приемки**:
- [ ] Next.js проект создан с TypeScript
- [ ] ESLint и Prettier настроены
- [ ] Структура папок соответствует feature-first подходу
- [ ] Алиасы путей настроены (@/components, @/lib)
- [ ] Проект запускается на localhost:3000

#### Задача 1.2: Установка и настройка Shadcn/ui
**Ответственный**: UI Разработчик
**Описание**: Установка Shadcn/ui и необходимых компонентов
**Критерии приемки**:
- [ ] Shadcn/ui установлен и настроен
- [ ] Базовые компоненты добавлены (Button, Card, Input, Dialog)
- [ ] Темная/светлая тема настроена
- [ ] Tailwind config расширен кастомными цветами

#### Задача 1.3: Настройка Supabase проекта
**Ответственный**: Supabase Инженер
**Описание**: Создание Supabase проекта и базовой схемы БД
**Критерии приемки**:
- [ ] Supabase проект создан
- [ ] Таблицы sessions, cards, participants созданы
- [ ] RLS политики настроены
- [ ] Переменные окружения добавлены в .env.local
- [ ] Supabase клиент настроен для SSR/CSR

#### Задача 1.4: Базовая навигация и layout
**Ответственный**: UX Дизайнер + Next.js Архитектор
**Описание**: Создание основных страниц и навигации
**Критерии приемки**:
- [ ] Landing page создана с CTA "Начать сессию"
- [ ] Board страница с динамическим роутом /board/[id]
- [ ] Layout с header настроен
- [ ] Instant redirect после создания сессии работает

---

### ЭТАП 2: Основной функционал доски (1 час)

#### Задача 2.1: Компонент BoardCanvas
**Ответственный**: `agents/ui-developer.md`
**Описание**: Создание основного canvas для доски
**Критерии приемки**:
- [ ] Infinite canvas с возможностью pan
- [ ] Double-click создает карточку в точке клика
- [ ] Grid background для ориентации
- [ ] Респонсивность на всех устройствах

#### Задача 2.2: Компонент IdeaCard
**Ответственный**: `agents/ui-developer.md` + `agents/ux-designer.md`
**Описание**: Карточка для идей с редактированием
**Критерии приемки**:
- [ ] Карточка отображает текст
- [ ] Click активирует режим редактирования
- [ ] Автофокус при создании
- [ ] Escape выходит из редактирования
- [ ] Delete удаляет карточку

#### Задача 2.3: Drag & Drop функционал
**Ответственный**: `agents/ui-developer.md`
**Описание**: Перетаскивание карточек по доске
**Критерии приемки**:
- [ ] Карточки перетаскиваются мышью
- [ ] Визуальный feedback при drag (тень, поворот)
- [ ] Позиция сохраняется после drop
- [ ] Touch поддержка для мобильных

#### Задача 2.4: CRUD операции с Supabase
**Ответственный**: `agents/supabase-engineer.md`
**Описание**: Интеграция с БД для сохранения карточек
**Критерии приемки**:
- [ ] Создание карточки сохраняется в БД
- [ ] Обновление контента и позиции работает
- [ ] Удаление карточки работает
- [ ] Загрузка существующих карточек при входе

---

### ЭТАП 3: Realtime синхронизация (30 минут)

#### Задача 3.1: Настройка Realtime каналов
**Ответственный**: `agents/realtime-specialist.md`
**Описание**: Подключение Supabase Realtime для сессии
**Критерии приемки**:
- [ ] Канал для сессии создается при входе
- [ ] Postgres changes подписка работает
- [ ] Broadcast канал настроен
- [ ] Автоматическое переподключение при разрыве

#### Задача 3.2: Синхронизация карточек
**Ответственный**: `agents/realtime-specialist.md`
**Описание**: Realtime синхронизация CRUD операций
**Критерии приемки**:
- [ ] Новые карточки появляются у всех участников
- [ ] Изменения контента синхронизируются
- [ ] Перемещения отображаются в realtime
- [ ] Удаление синхронизируется
- [ ] Оптимистичные обновления работают

#### Задача 3.3: Presence - курсоры
**Ответственный**: `agents/realtime-specialist.md` + `agents/ui-developer.md`
**Описание**: Отображение курсоров других участников
**Критерии приемки**:
- [ ] Курсоры других участников видны
- [ ] Имя участника отображается у курсора
- [ ] Цвет курсора уникален для каждого
- [ ] Плавное движение курсоров (throttling)

#### Задача 3.4: Presence - индикаторы
**Ответственный**: `agents/ui-developer.md`
**Описание**: Индикаторы активности участников
**Критерии приемки**:
- [ ] Список участников в углу экрана
- [ ] "Печатает" индикатор на карточке
- [ ] Счетчик активных участников
- [ ] Анимация при join/leave

---

### ЭТАП 4: AI интеграция (30 минут)

#### Задача 4.1: Настройка Perplexity MCP
**Ответственный**: `agents/ai-integration.md`
**Описание**: Подключение и настройка Perplexity API
**Критерии приемки**:
- [ ] Perplexity MCP настроен
- [ ] Базовый клиент для запросов создан
- [ ] Error handling настроен
- [ ] Rate limiting реализован

#### Задача 4.2: UI для AI функций
**Ответственный**: `agents/ui-developer.md` + `agents/ai-integration.md`
**Описание**: Кнопка и интерфейс для AI улучшений
**Критерии приемки**:
- [ ] Кнопка "✨ Улучшить" на выбранной карточке
- [ ] Loading состояние при запросе
- [ ] Shimmer эффект во время генерации
- [ ] Preview диалог с результатом

#### Задача 4.3: Промпты и обработка ответов
**Ответственный**: `agents/ai-integration.md`
**Описание**: Оптимизация промптов для улучшения идей
**Критерии приемки**:
- [ ] Промпт генерирует полезные улучшения
- [ ] Ответ парсится корректно
- [ ] AI-карточки визуально отличаются
- [ ] Связь с оригинальной карточкой отображается

#### Задача 4.4: Edge Function для AI
**Ответственный**: `agents/supabase-engineer.md` + `agents/ui-developer.md`
**Описание**: Serverless функция для AI запросов
**Критерии приемки**:
- [ ] Edge Function деплоится в Supabase
- [ ] Функция вызывает Perplexity API
- [ ] Результат сохраняется в БД
- [ ] Метаданные AI сохраняются

---

### ЭТАП 5: Полировка и оптимизация (30 минут)

#### Задача 5.1: Анимации и микро-интеракции
**Ответственный**: `agents/ui-developer.md`
**Описание**: Добавление Framer Motion анимаций
**Критерии приемки**:
- [ ] Карточки появляются с анимацией
- [ ] Плавные переходы при drag
- [ ] Hover эффекты работают
- [ ] Reduced motion поддерживается

#### Задача 5.2: Мобильная адаптация
**Ответственный**: `agents/ui-developer.md` + `agents/ux-designer.md`
**Описание**: Оптимизация для мобильных устройств
**Критерии приемки**:
- [ ] Touch жесты работают корректно
- [ ] UI адаптирован для маленьких экранов
- [ ] Виртуальная клавиатура не ломает layout
- [ ] Производительность на мобильных приемлемая


#### Задача 5.4: Тестирование и исправления
**Ответственный**: `agents/testing-qa.md`
**Описание**: E2E тестирование основных сценариев
**Критерии приемки**:
- [ ] Создание и редактирование карточек работает
- [ ] Realtime синхронизация стабильна
- [ ] AI функции возвращают результат
- [ ] Нет критических ошибок в консоли
- [ ] Производительность приемлемая (FCP < 2s)

---

## Чек-лист готовности к демонстрации

### Функциональность
- [ ] Instant start без регистрации
- [ ] Создание/редактирование/удаление карточек
- [ ] Drag & drop работает плавно
- [ ] Realtime синхронизация мгновенная
- [ ] Курсоры других участников видны
- [ ] AI улучшение идей работает
- [ ] Мобильная версия функциональна

### Качество
- [ ] Нет ошибок в консоли браузера
- [ ] Анимации плавные (60fps)
- [ ] Загрузка страницы < 2 секунд
- [ ] Realtime latency < 100ms
- [ ] UI отзывчивый на всех устройствах

### Вау-эффект
- [ ] Мгновенная синхронизация впечатляет
- [ ] AI дает полезные результаты
- [ ] Визуально приятный интерфейс
- [ ] Простота использования очевидна
- [ ] "Магия" realtime коллаборации ощущается

---

## Координация проекта

### Project Manager
На протяжении всего проекта **Project Manager** отвечает за:
- Координацию выполнения всех задач между агентами
- Мониторинг прогресса и статусов
- Ведение актуальной документации (README.md, CHANGELOG.md)
- Контроль качества и соответствия критериям приемки
- Эскалацию блокеров и принятие решений
- Регулярные статус-апдейты о ходе разработки

Project Manager должен **обязательно**:
- Обновлять статус каждой задачи в реальном времени
- Документировать все значимые изменения
- Проверять выполнение критериев приемки
- Координировать работу между агентами
- Вести README.md в актуальном состоянии

## Инструкции по выполнению

### Для разработчика
1. Следуйте плану последовательно, этап за этапом
2. Используйте соответствующего агента для каждой задачи
3. **Project Manager координирует все действия**
4. После каждого этапа запускайте `npm run dev` и тестируйте
5. Коммитьте изменения после каждого успешного этапа
6. При блокерах сразу сообщайте Project Manager для эскалации

### Тестирование после каждого этапа
```bash
# Запуск приложения
npm run dev

# Проверка TypeScript
npm run type-check

# Проверка линтера
npm run lint

# Открыть в браузере
open http://localhost:3000
```

### Команды для агентов
Каждый агент должен использовать свои MCP инструменты согласно документации в папке `agents/`.

---

## Ожидаемое время выполнения
- **Этап 1**: 30 минут
- **Этап 2**: 60 минут
- **Этап 3**: 30 минут
- **Этап 4**: 30 минут
- **Этап 5**: 30 минут
- **Итого**: ~3 часа

## Риски и митигация
1. **Realtime не синхронизируется** → Проверить RLS политики и подписки
2. **AI не отвечает** → Добавить fallback с mock данными
3. **Производительность низкая** → Отключить тяжелые анимации
4. **Мобильная версия глючит** → Упростить функционал для MVP

## Определение успеха
Проект считается успешным если:
1. Два человека могут одновременно работать с доской
2. Изменения синхронизируются менее чем за 200ms
3. AI улучшение работает и дает результат
4. Приложение вызывает "вау" эффект при демонстрации
